<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectGuid>{BC861E29-027D-4AC6-AB24-A7B0CD0FB5E8}</ProjectGuid>
    <OutputType>Library</OutputType>
    <TargetFrameworks>net45</TargetFrameworks>    
    <Platforms>AnyCPU;x64;x86</Platforms>    
  </PropertyGroup>
  <PropertyGroup>
    <AssemblyName>Microsoft.Automata</AssemblyName>
    <RootNamespace>Microsoft.Automata</RootNamespace>
    <Product>Automata</Product>
    <Company></Company>
    <Copyright>Copyright ©  2017</Copyright>
    <Version>1.0.2</Version>
  </PropertyGroup>  
  <PropertyGroup>
    <SignAssembly>true</SignAssembly>
    <AssemblyOriginatorKeyFile>AutomataKey.snk</AssemblyOriginatorKeyFile>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup>  
  <PropertyGroup>
    <!-- there is some unsafe code outside of UNSAFE-guarded blocks is let's enable it globally -->
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <!-- this does not work, because all properties were not resolved yet -->
  <!-- <PropertyGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework'"> -->
  <PropertyGroup Condition="'$(TargetFramework.TrimEnd(`0123456789.`))' == 'net'">
    <!-- Properties for .NET Framework -->
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'AnyCPU'">
    <PlatformTarget>AnyCPU</PlatformTarget>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'x64'">
    <PlatformTarget>x64</PlatformTarget>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)' == 'x86'">
    <PlatformTarget>x86</PlatformTarget>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <OutputPath>bin\$(Platform)\Debug\</OutputPath>
    <DefineConstants>TRACE;DEBUG;REX;EXPORT_GPPG;UNSAFE</DefineConstants>
    <!-- 
    This is enforced here to support DGML showing in current VS, 
    maybe it is enabled by default and not neccessary.
    Introduced in 52a715f442ff840af26bc708c7ed656500558789
    Support for DGML in VS disabled in fb1073e6df71927aa6f7c42dbddf003907ea4071
    -->
    <UseVSHostingProcess>true</UseVSHostingProcess>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <OutputPath>bin\$(Platform)\Release\</OutputPath>
    <DefineConstants>TRACE;REX;EXPORT_GPPG;INLINE;UNSAFE</DefineConstants>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
  </PropertyGroup>
  <!-- x86 build seems to not support UNSAFE and INLINE, but maybe it is a glitch-pattern in the original configuration -->
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x86'">
    <DefineConstants>TRACE;DEBUG;REX,EXPORT_GPPG</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Release|x86'">
    <DefineConstants>TRACE;REX,EXPORT_GPPG</DefineConstants>
  </PropertyGroup>  
  <PropertyGroup>
    <!-- maybe can be removed? -->
    <StartupObject />
  </PropertyGroup>
  <PropertyGroup>
    <!--
    Setting this to false disables auto-inclusion of files for compilation, embedding and others
    Can be disabled when all **\*.cs files in project are ment to be compiled or are specificaly removed with
    <Compile Remove="Abcd.cs" />
    -->
    <EnableDefaultItems>false</EnableDefaultItems>
  </PropertyGroup>
  <!-- assembly and package references -->
  <ItemGroup>
    <PackageReference Include="System.Numerics.Vectors" Version="4.1.4" />
    <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="4.0.4" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework'">
    <Reference Include="EnvDTE, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
      <EmbedInteropTypes>True</EmbedInteropTypes>
      <HintPath>C:\Program Files (x86)\Common Files\Microsoft Shared\MSEnv\PublicAssemblies\envdte.dll</HintPath>
      <!--possible alternatives-->
      <!--<HintPath>C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\IDE\PublicAssemblies\envdte.dll</HintPath>-->
      <!--<HintPath>C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\PublicAssemblies\envdte.dll</HintPath>-->
    </Reference>
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETStandard'">
    <PackageReference Include="System.CodeDom" Version="4.7.0" />
  </ItemGroup>
  <!-- source code and other includes -->
  <ItemGroup>
    <Compile Include="BasicCountingSet.cs" />
    <Compile Include="BooleanAlgebras\BV64Algebra.cs" />
    <Compile Include="BooleanAlgebras\BVAlgebra.cs" />
    <Compile Include="BV.cs" />
    <Compile Include="ConditionalDerivative.cs" />
    <Compile Include="CountingAutomaton.cs" />
    <Compile Include="CountingSetAutomaton.cs" />
    <Compile Include="CsAlgebra.cs" />
    <Compile Include="DirectedGraphs\DgmlWriter.cs" />
    <Compile Include="Interfaces\ICounter.cs" />
    <Compile Include="Interfaces\ICountingSet.cs" />
    <Compile Include="Internal\AutomataAlgebra.cs" />
    <Compile Include="AutomataException.cs" />
    <Compile Include="Automaton.cs" />
    <Compile Include="AutomatonSerializer.cs" />
    <Compile Include="BDD.cs" />
    <Compile Include="BDDAlgebra.cs" />
    <Compile Include="BigInt.cs" />
    <Compile Include="BooleanAlgebras\BV128Algebra.cs" />
    <Compile Include="BooleanAlgebras\CartesianAlgebra.cs" />
    <Compile Include="BooleanAlgebras\DisjointUnionAlgebra.cs" />
    <Compile Include="BooleanAlgebras\FiniteSetAlgebra.cs" />
    <Compile Include="BooleanAlgebras\TrivialBooleanAlgebra.cs" />
    <Compile Include="BREX.cs" />
    <Compile Include="BREXManager.cs" />
    <Compile Include="CharacterEncoding.cs" />
    <Compile Include="CharSetSolver.cs" />
    <Compile Include="Chooser.cs" />
    <Compile Include="ConsList.cs" />
    <Compile Include="Internal\ComparablePair.cs" />
    <Compile Include="Internal\EditDistance.cs" />
    <Compile Include="Internal\ExtendedAction.cs" />
    <Compile Include="Internal\ExtendedAutomaton.cs" />
    <Compile Include="Internal\ExtendedMove.cs" />
    <Compile Include="Grammars\ContextFreeGrammar.cs" />
    <Compile Include="Grammars\GrammarParser.cs" />
    <Compile Include="Grammars\GrammarSymbol.cs" />
    <Compile Include="Grammars\Nonterminal.cs" />
    <Compile Include="Grammars\Production.cs" />
    <Compile Include="Grammars\Terminal.cs" />
    <Compile Include="Internal\GraphAlgorithms.cs" />
    <Compile Include="Interfaces\IAcceptor.cs" />
    <Compile Include="Interfaces\IAutomaton.cs" />
    <Compile Include="Interfaces\IBooleanAlgebra.cs" />
    <Compile Include="Interfaces\ICharAlgebra.cs" />
    <Compile Include="Interfaces\IMatcher.cs" />
    <Compile Include="Interfaces\IContext.cs" />
    <Compile Include="Interfaces\IDeterministicFiniteTransducer.cs" />
    <Compile Include="Interfaces\ILibrary.cs" />
    <Compile Include="Interfaces\INameProvider.cs" />
    <Compile Include="Interfaces\IPrettyPrinter.cs" />
    <Compile Include="Interfaces\IRegexConverter.cs" />
    <Compile Include="Interfaces\ISolver.cs" />
    <Compile Include="Interfaces\ITransducer.cs" />
    <Compile Include="Interfaces\IValue.cs" />
    <Compile Include="Internal\CharRangeSolver.cs" />
    <Compile Include="DirectedGraphs\DotWriter.cs" />
    <Compile Include="Generated\IgnoreCaseRelation.cs" />
    <Compile Include="Generated\UnicodeCategoryRanges.cs" />
    <Compile Include="Internal\HashSetSolver.cs" />
    <Compile Include="Internal\IntSet.cs" />
    <Compile Include="Internal\Maybe.cs" />
    <Compile Include="Internal\SpecialCharacters.cs" />
    <Compile Include="Internal\StateDistinguisher.cs" />
    <Compile Include="Internal\UnicodeCategoryTheory.cs" />
    <Compile Include="Internal\UnicodeCategoryTheoryProviders.cs" />
    <Compile Include="IntervalSet.cs" />
    <Compile Include="RegexAutomaton\DecisionTree.cs" />
    <Compile Include="RegexAutomaton\RegexAutomaton.cs" />
    <Compile Include="RegexExtensionMethods.cs" />
    <Compile Include="SymbolicRegexNode.cs" />
    <Compile Include="SymbolicRegexBuilder.cs" />
    <Compile Include="SymbolicRegexMatcher.cs" />
    <Compile Include="SymbolicRegexSampler.cs" />
    <Compile Include="Utilities\AutomataCSharpCompiler.cs" />
    <Compile Include="Utilities\CommandLineParser.cs" />
    <Compile Include="Utilities\CppCodeGenerator.cs" />
    <Compile Include="Utilities\HelperPredicates.cs" />
    <Compile Include="Utilities\HighTimer.cs" />
    <Compile Include="Utilities\IgnoreCaseRelationGenerator.cs" />
    <Compile Include="Utilities\IgnoreCaseTransformer.cs" />
    <Compile Include="OUT.Gppg\LexLocationInFile.cs" />
    <Compile Include="Utilities\RegexToRangeAutomatonSerializer.cs" />
    <Compile Include="OUT.Gppg\ShiftReduceParser.cs" />
    <Compile Include="Utilities\UnicodeCategoryRangesGenerator.cs" />
    <Compile Include="Internal\IteBag.cs" />
    <Compile Include="MintermGenerator.cs" />
    <Compile Include="Move.cs" />
    <Compile Include="OrderedSet.cs" />
    <Compile Include="Internal\PartitionRefinement.cs" />
    <Compile Include="PredicateTrie.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="Internal\PushdownAutomaton.cs" />
    <Compile Include="Internal\PushdownMove.cs" />
    <Compile Include="RegexParser\RegexBoyerMoore.cs" />
    <Compile Include="RegexParser\RegexCharClass.cs" />
    <Compile Include="RegexParser\RegexCode.cs" />
    <Compile Include="RegexParser\RegexFCD.cs" />
    <Compile Include="RegexParser\RegexNode.cs" />
    <Compile Include="RegexParser\RegexParser.cs" />
    <Compile Include="RegexParser\RegexReplacement.cs" />
    <Compile Include="RegexParser\RegexTree.cs" />
    <Compile Include="RegexParser\SR.cs" />
    <Compile Include="RegexToAutomatonBuilder.cs" />
    <Compile Include="RegexToAutomatonConverter.cs" />
    <Compile Include="Internal\RegexToSMTConverter.cs" />
    <Compile Include="Rex\RexEngine.cs" />
    <Compile Include="Rex\RexSettings.cs" />
    <Compile Include="Rule.cs" />
    <Compile Include="Sequence.cs" />
    <Compile Include="SFA.cs" />
    <Compile Include="ST.cs" />
    <Compile Include="STb.cs" />
    <Compile Include="Internal\STbComposer.cs" />
    <Compile Include="STbFromRegexBuilder.cs" />
    <Compile Include="Internal\STbSimplifier.cs" />
    <Compile Include="Internal\STbSimulator.cs" />
    <Compile Include="STBuilder.cs" />
    <Compile Include="Internal\StringUtility.cs" />
    <Compile Include="Internal\ThreeAutomaton.cs" />
    <Compile Include="Internal\UnionFindHopKarp.cs" />
    <Compile Include="Utilities\UTF8Encoding.cs" />
    <Compile Include="Utilities\VectorizedIndexOf.cs" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Templates\AutomataTextTemplate.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>AutomataTextTemplate.tt</DependentUpon>
    </Compile>
    <Compile Include="Templates\AutomatonMovesTextTemplate.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>AutomatonMovesTextTemplate.tt</DependentUpon>
    </Compile>
    <Compile Include="Templates\AutomatonTextTemplate.cs">
      <AutoGen>True</AutoGen>
      <DesignTime>True</DesignTime>
      <DependentUpon>AutomatonTextTemplate.tt</DependentUpon>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <Content Include="Templates\AutomataTextTemplate.tt">
      <Generator>TextTemplatingFilePreprocessor</Generator>
      <LastGenOutput>AutomataTextTemplate.cs</LastGenOutput>
    </Content>
    <Content Include="Templates\AutomatonMovesTextTemplate.tt">
      <Generator>TextTemplatingFilePreprocessor</Generator>
      <LastGenOutput>AutomatonMovesTextTemplate.cs</LastGenOutput>
    </Content>
    <Content Include="Templates\AutomatonTextTemplate.tt">
      <Generator>TextTemplatingFilePreprocessor</Generator>
      <LastGenOutput>AutomatonTextTemplate.cs</LastGenOutput>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <!-- Text templating service -->
    <!-- https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/bb932394(v=vs.100)/ -->
    <Service Include="{508349B6-6B84-4DF5-91F0-309BEEBAD82D}" />
  </ItemGroup>
  <ItemGroup>
    <None Include="AutomataKey.snk" />
  </ItemGroup>
</Project>